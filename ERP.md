[[Закрытие месяца.Неожиданный сброс закрытия.Оформление документов распределения расходов]]

## Контрольки

### Проверка согласованности регистра расчетов по документам

<details>
    <summary>Запрос для поиска строчек "по документам" с разными знаками для одного объекта расчетов</summary>

``` SDBL
ВЫБРАТЬ
	РасчетыСПоставщикамиПоДокументамОстатки.АналитикаУчетаПоПартнерам КАК АналитикаУчетаПоПартнерам,
	РасчетыСПоставщикамиПоДокументамОстатки.ЗаказПоставщику КАК ЗаказПоставщику,
	РасчетыСПоставщикамиПоДокументамОстатки.РасчетныйДокумент КАК РасчетныйДокумент,
	РасчетыСПоставщикамиПоДокументамОстатки.Валюта КАК Валюта,
	РасчетыСПоставщикамиПоДокументамОстатки.УдалитьДатаПлатежа КАК УдалитьДатаПлатежа,
	РасчетыСПоставщикамиПоДокументамОстатки.УдалитьКПоступлениюОстаток КАК УдалитьКПоступлениюОстаток,
	РасчетыСПоставщикамиПоДокументамОстатки.УдалитьКОплатеОстаток КАК УдалитьКОплатеОстаток,
	РасчетыСПоставщикамиПоДокументамОстатки.КВозвратуОстаток КАК КВозвратуОстаток,
	РасчетыСПоставщикамиПоДокументамОстатки.ДолгОстаток КАК ДолгОстаток,
	РасчетыСПоставщикамиПоДокументамОстатки.ДолгУпрОстаток КАК ДолгУпрОстаток,
	РасчетыСПоставщикамиПоДокументамОстатки.ДолгРеглОстаток КАК ДолгРеглОстаток,
	РасчетыСПоставщикамиПоДокументамОстатки.ПредоплатаОстаток КАК ПредоплатаОстаток,
	РасчетыСПоставщикамиПоДокументамОстатки.ПредоплатаУпрОстаток КАК ПредоплатаУпрОстаток,
	РасчетыСПоставщикамиПоДокументамОстатки.ПредоплатаРеглОстаток КАК ПредоплатаРеглОстаток,
	РасчетыСПоставщикамиПоДокументамОстатки.ЗалогЗаТаруОстаток КАК ЗалогЗаТаруОстаток,
	РасчетыСПоставщикамиПоДокументамОстатки.ЗалогЗаТаруРеглОстаток КАК ЗалогЗаТаруРеглОстаток
ПОМЕСТИТЬ втОстатки
ИЗ
	РегистрНакопления.РасчетыСПоставщикамиПоДокументам.Остатки КАК РасчетыСПоставщикамиПоДокументамОстатки
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втОстатки.АналитикаУчетаПоПартнерам КАК АналитикаУчетаПоПартнерам,
	втОстатки.ЗаказПоставщику КАК ЗаказПоставщику,
	КОЛИЧЕСТВО(втОстатки.РасчетныйДокумент) КАК РасчетныйДокумент,
	втОстатки.Валюта КАК Валюта,
	втОстатки.УдалитьДатаПлатежа КАК УдалитьДатаПлатежа,
	ВЫБОР
		КОГДА втОстатки.УдалитьКПоступлениюОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ КАК УдалитьКПоступлениюОстатокЗнак,
	ВЫБОР
		КОГДА втОстатки.УдалитьКОплатеОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ КАК УдалитьКОплатеОстатокЗнак,
	ВЫБОР
		КОГДА втОстатки.КВозвратуОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ КАК КВозвратуОстатокЗнак,
	ВЫБОР
		КОГДА втОстатки.ДолгОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ КАК ДолгОстатокЗнак,
	ВЫБОР
		КОГДА втОстатки.ДолгУпрОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ КАК ДолгУпрОстатокЗнак,
	ВЫБОР
		КОГДА втОстатки.ДолгРеглОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ КАК ДолгРеглОстатокЗнак,
	ВЫБОР
		КОГДА втОстатки.ПредоплатаОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ КАК ПредоплатаОстатокЗнак,
	ВЫБОР
		КОГДА втОстатки.ПредоплатаУпрОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ КАК ПредоплатаУпрОстатокЗнак,
	ВЫБОР
		КОГДА втОстатки.ПредоплатаРеглОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ КАК ПредоплатаРеглОстатокЗнак,
	ВЫБОР
		КОГДА втОстатки.ЗалогЗаТаруОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ КАК ЗалогЗаТаруОстатокЗнак,
	ВЫБОР
		КОГДА втОстатки.ЗалогЗаТаруРеглОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ КАК ЗалогЗаТаруРеглОстатокЗнак
ПОМЕСТИТЬ втКлючиОстатков
ИЗ
	втОстатки КАК втОстатки

СГРУППИРОВАТЬ ПО
	втОстатки.АналитикаУчетаПоПартнерам,
	втОстатки.Валюта,
	ВЫБОР
		КОГДА втОстатки.ПредоплатаРеглОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ,
	ВЫБОР
		КОГДА втОстатки.УдалитьКОплатеОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ,
	ВЫБОР
		КОГДА втОстатки.ДолгРеглОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ,
	втОстатки.ЗаказПоставщику,
	ВЫБОР
		КОГДА втОстатки.ПредоплатаОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ,
	ВЫБОР
		КОГДА втОстатки.ПредоплатаУпрОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ,
	ВЫБОР
		КОГДА втОстатки.КВозвратуОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ,
	втОстатки.УдалитьДатаПлатежа,
	ВЫБОР
		КОГДА втОстатки.ДолгОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ,
	ВЫБОР
		КОГДА втОстатки.ЗалогЗаТаруОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ,
	ВЫБОР
		КОГДА втОстатки.УдалитьКПоступлениюОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ,
	ВЫБОР
		КОГДА втОстатки.ДолгУпрОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ,
	ВЫБОР
		КОГДА втОстатки.ЗалогЗаТаруРеглОстаток < 0
			ТОГДА "Отрицательный"
		ИНАЧЕ "Неотрицательный"
	КОНЕЦ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втКлючиОстатков.АналитикаУчетаПоПартнерам КАК АналитикаУчетаПоПартнерам,
	втКлючиОстатков.ЗаказПоставщику КАК ЗаказПоставщику,
	втКлючиОстатков.Валюта КАК Валюта,
	втКлючиОстатков.УдалитьДатаПлатежа КАК УдалитьДатаПлатежа,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.УдалитьКПоступлениюОстатокЗнак) КАК УдалитьКПоступлениюОстатокЗнак,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.УдалитьКОплатеОстатокЗнак) КАК УдалитьКОплатеОстатокЗнак,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.КВозвратуОстатокЗнак) КАК КВозвратуОстатокЗнак,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ДолгОстатокЗнак) КАК ДолгОстатокЗнак,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ДолгУпрОстатокЗнак) КАК ДолгУпрОстатокЗнак,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ДолгРеглОстатокЗнак) КАК ДолгРеглОстатокЗнак,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ПредоплатаОстатокЗнак) КАК ПредоплатаОстатокЗнак,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ПредоплатаУпрОстатокЗнак) КАК ПредоплатаУпрОстатокЗнак,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ПредоплатаРеглОстатокЗнак) КАК ПредоплатаРеглОстатокЗнак,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ЗалогЗаТаруОстатокЗнак) КАК ЗалогЗаТаруОстатокЗнак,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ЗалогЗаТаруРеглОстатокЗнак) КАК ЗалогЗаТаруРеглОстатокЗнак
ИЗ
	втКлючиОстатков КАК втКлючиОстатков

СГРУППИРОВАТЬ ПО
	втКлючиОстатков.АналитикаУчетаПоПартнерам,
	втКлючиОстатков.ЗаказПоставщику,
	втКлючиОстатков.Валюта,
	втКлючиОстатков.УдалитьДатаПлатежа
Имеющие
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.УдалитьКПоступлениюОстатокЗнак) > 1
	ИЛИ КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.УдалитьКОплатеОстатокЗнак) > 1
	ИЛИ КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.КВозвратуОстатокЗнак)  > 1
	ИЛИ КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ДолгОстатокЗнак)  > 1
	ИЛИ КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ДолгУпрОстатокЗнак) > 1
	ИЛИ КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ДолгРеглОстатокЗнак)  > 1
	ИЛИ КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ПредоплатаОстатокЗнак)  > 1
	ИЛИ КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ПредоплатаУпрОстатокЗнак) > 1
	ИЛИ КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ПредоплатаРеглОстатокЗнак)  > 1
	ИЛИ КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ЗалогЗаТаруОстатокЗнак)  > 1
	ИЛИ КОЛИЧЕСТВО(РАЗЛИЧНЫЕ втКлючиОстатков.ЗалогЗаТаруРеглОстатокЗнак)  > 1
```
</details>
